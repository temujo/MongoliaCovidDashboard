<!doctype html>

<html lang="mn">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta name="description" content="Covid-19 мэдээлэлийн самбар.">
	<meta name="author" content="Ojomojoyolo">
	
	<title>Covid Самбар</title>

	<link rel="stylesheet" href="css/reset.css">
	<link rel="stylesheet" href="css/style.css">

	<link rel="preconnect" href="https://fonts.gstatic.com">
	<link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">
	<script src="https://kit.fontawesome.com/124fb15106.js" crossorigin="anonymous"></script>
</head>

<body>
	<header>
		<div class="title-container">
			<h1>Covid Самбар</h1>
		</div>
		
		<div class="search-container">
			<i class="fas fa-search"></i>
		</div>
	</header>

	<main>
		<div class="stoplights-container">
			<div class="stoplights">
				<div class="stat-container r">
					<div class="stat">Батлагдсан:</div>
					<div class="data" id="confirmed-total">...</div>
				</div>
				<div class="stat-container g">
					<div class="stat">Эдгэрэлт:</div>
					<div class="data" id="recovered-total">...</div>
				</div>
				<div class="stat-container y">
					<div class="stat">Нас барсан:</div>
					<div class="data" id="deceased-total">...</div>
				</div>
			</div>
		</div>
		<div class="geography">
			<div class="map-container">
				<img src="img/ub.jpg" alt="Mongolian map">
			</div>
		</div>
		<div class="region-container">
			<div class="region-title-container">
				<h1>Улаанбаатар</h1>
			</div>
			<div class="row">
				<div class="stat-container red-stat">
					<div class="stat">Батлагдсан:</div>
					<div class="data" id="confirmed-region">...</div>
				</div>
			</div>
			<div class="row" style="margin-bottom: 100px;">
				<div class="stat-container small green-stat">
					<div class="stat">Эдгэрэлт:</div>
					<div class="data" id="recovered-region">...</div>
				</div>
				<div class="stat-container small yellow-stat">
					<div class="stat">Нас барсан:</div>
					<div class="data" id="deceased-region">...</div>
				</div>
			</div>
		</div>

		<div class="footer">
			<p>Мэдээлэлийг Эрүүл мэндийн яамы <a href="https://covid19.mohs.mn/">сайтнаас</a> авав.</p>
		</div>
	</main>

	<script type="text/javascript">
		var apiUrl = 'https://2ei0ro.deta.dev/aimag?q=1';

		fetch(apiUrl).then(response => {
		  return response.json();
		}).then(data => {
			document.getElementById("confirmed-region").textContent=data['confirmed'];
			document.getElementById("recovered-region").textContent=data['recovered'];
			document.getElementById("deceased-region").textContent=data['deceased'];
		}).catch(err => {	
			document.getElementById("confirmed-region").textContent="Error";
			document.getElementById("recovered-region").textContent="Error";
			document.getElementById("deceased-region").textContent="Error";
		});

		var apiUrl = 'https://api.covid19api.com/country/mongolia/status/confirmed?from=2020-11-29T00:00:00Z';

		fetch(apiUrl).then(response => {
		  return response.json();
		}).then(data => {
			document.getElementById("confirmed-total").textContent=data[data.length - 1]["Cases"]+ " нийт";

		}).catch(err => {
			document.getElementById("confirmed-total").textContent="Error";
			
		});

		var apiUrl = 'https://api.covid19api.com/country/mongolia/status/recovered?from=2020-11-29T00:00:00Z';

		fetch(apiUrl).then(response => {
		  return response.json();
		}).then(data => {
			document.getElementById("recovered-total").textContent=data[data.length - 1]["Cases"]+ " нийт";

		}).catch(err => {
			document.getElementById("recovered-total").textContent="Error";

		});

		var apiUrl = 'https://api.covid19api.com/country/mongolia/status/deaths?from=2020-11-29T00:00:00Z';

		fetch(apiUrl).then(response => {
		  return response.json();
		}).then(data => {
			document.getElementById("deceased-total").textContent=data[data.length - 1]["Cases"]+ " нийт";

		}).catch(err => {
			document.getElementById("deceased-total").textContent="Error";
		});


	</script>
</body>
</html>